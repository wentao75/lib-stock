{"version":3,"file":"lib-stock.js","sources":["src/util.js","src/transaction-engine.js","src/reports.js","src/simulator.js","src/momentum-breakthrough.js","src/stoploss.js","src/benchmark-basic.js","src/index.js"],"sourcesContent":["function formatFxstr(num) {\n    return num.toLocaleString(\"zh-CN\"); //, { style: \"currency\", currency: \"CNY\" });\n}\n\nexport { formatFxstr };\n","import _ from \"lodash\";\nimport { formatFxstr } from \"./util\";\nimport debugpkg from \"debug\";\n\nconst debug = debugpkg(\"engine\");\n\n/**\n * ä¸»å¤„ç†è¿‡ç¨‹\n * 1. æŸ¥çœ‹è®¾ç½®ä¸­çš„å–å‡ºæ¨¡å‹åˆ—è¡¨ï¼ŒæŒ‰åºæ‰§è¡Œï¼Œå¦‚æœæˆäº¤ï¼Œåˆ™ç›´æ¥æ¸…ç®—\n * 2. å¦‚æœæ‰§è¡Œå®Œå–å‡ºï¼Œä»ç„¶æœ‰æŒä»“ï¼Œæ£€æŸ¥é…ç½®æ˜¯å¦è®¸å¯ä¹°å…¥\n * 3. å¦‚æœéœ€è¦ä¹°å…¥ï¼ŒæŸ¥çœ‹è®¾ç½®çš„ä¹°å…¥æ¨¡å‹åˆ—è¡¨ï¼ŒæŒ‰åºæ‰§è¡Œï¼Œå¦‚æœæˆäº¤ï¼Œåˆ™ç›´æ¥æ¸…ç®—\n *\n * 2020.8.26 ç›®å‰å·²ç»æ”¯æŒæŒ‰ç…§è§„åˆ™ï¼Œéå›ºå®šå¤´å¯¸æ–¹å¼ä¸‹ï¼Œå¯ä»¥åœ¨æŒä»“ä¸‹ä»ç„¶ä¹°å…¥\n *           æŒä»“å–å‡ºæŒ‰ç…§æ¯ç¬”å•ç‹¬è¿›è¡Œï¼Œä¸åˆå¹¶è¿›è¡Œ\n *\n * @param {*} index å½“å‰æ—¥è‚¡ç¥¨æ•°æ®ç´¢å¼•\n * @param {*} stockData è‚¡ç¥¨æ•°æ®ä¿¡æ¯\n * @param {*} capitalData è´¦æˆ·ä¿¡æ¯\n * @param {*} options ç®—æ³•å‚æ•°\n */\nasync function executeTransaction(index, stockData, capitalData, options) {\n    let translog = null;\n    // é¦–å…ˆæ£€æŸ¥å–å‡º\n    // æ‰€æœ‰ç®—æ³•é¦–å…ˆæ£€æŸ¥å¹¶å¤„ç†æ­¢æŸ\n    // æ£€æŸ¥æ˜¯å¦éœ€è¦æ­¢æŸ\n    let tradeDate = stockData[index].trade_date;\n    let stockInfo = capitalData.info;\n\n    let sellRules = options.rules && options.rules.sell;\n    let buyRules = options.rules && options.rules.buy;\n\n    // ç›®å‰çš„æŒä»“æƒ…å†µ\n    let stocks = capitalData && capitalData.stocks;\n    if (sellRules) {\n        // æ¯ä¸ªä¹°å…¥æŒè‚¡å•ç‹¬å¤„ç†\n        let stockId = 0;\n        while (stockId < stocks.length) {\n            let stock = stocks[stockId];\n            debug(`å–å‡ºè‚¡ç¥¨ä¿¡æ¯: %o`, stock);\n\n            let sold = false;\n            for (let rule of sellRules) {\n                if (rule) {\n                    debug(\n                        `${rule.name} å–å‡ºæ£€æŸ¥ï¼š${tradeDate}, %o`,\n                        stockData[index]\n                    );\n                    translog = rule.checkSellTransaction(\n                        stockInfo,\n                        stock,\n                        index,\n                        stockData,\n                        options\n                    );\n                    if (translog) translog.transeq = stock.transeq;\n                    if (\n                        executeCapitalSettlement(\n                            stockInfo,\n                            translog,\n                            capitalData,\n                            options\n                        )\n                    ) {\n                        debug(\n                            `${\n                                rule.name\n                            } å–å‡ºï¼š${tradeDate}ï¼Œä»·æ ¼ï¼š${formatFxstr(\n                                translog.price\n                            )}å…ƒï¼Œæ•°é‡ï¼š${\n                                translog.count / 100\n                            }æ‰‹ï¼Œæ€»ä»·ï¼š${translog.total.toFixed(\n                                2\n                            )}å…ƒ[ä½£é‡‘${translog.commission.toFixed(\n                                2\n                            )}å…ƒï¼Œè¿‡æˆ·è´¹${translog.fee.toFixed(\n                                2\n                            )}ï¼Œå°èŠ±ç¨${translog.duty.toFixed(2)}å…ƒ], ${\n                                translog.memo\n                            }`\n                        );\n                        sold = true;\n                        break;\n                    }\n                }\n            }\n            if (!sold) {\n                // æ²¡æœ‰å–å‡ºï¼Œéœ€è¦æŸ¥çœ‹ä¸‹ä¸€æ¡æŒè‚¡è¿›è¡Œæ£€æŸ¥\n                stockId++;\n            }\n        }\n    }\n\n    // å¦‚æœéå›ºå®šå¤´å¯¸ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦æœ‰æŒä»“ï¼Œå¦‚æœæœ‰ä¸è¿›è¡Œä¹°å…¥\n    if (!options.fixCash && capitalData.stocks.length > 0) return;\n    // if (capitalData && capitalData.stock && capitalData.stock.count > 0) return;\n\n    // æ‰§è¡Œä¹°å…¥\n    // debug(\"æ‰§è¡Œä¹°å…¥æ£€æŸ¥\");\n    let cash = capitalData.balance;\n    if (options.fixCash) cash = options.initBalance;\n    if (buyRules) {\n        for (let rule of buyRules) {\n            translog = rule.checkBuyTransaction(\n                stockInfo,\n                cash,\n                index,\n                stockData,\n                options\n            );\n            if (translog) translog.transeq = capitalData._transeq++;\n            // debug(`ä¹°å…¥ç»“æœï¼š%o`, translog);\n            if (\n                executeCapitalSettlement(\n                    stockInfo,\n                    translog,\n                    capitalData,\n                    options\n                )\n            ) {\n                debug(\n                    `${\n                        rule.name\n                    } ä¹°å…¥äº¤æ˜“ï¼š${tradeDate}ï¼Œä»·æ ¼ï¼š${translog.price.toFixed(\n                        2\n                    )}å…ƒï¼Œæ•°é‡ï¼š${\n                        translog.count / 100\n                    }æ‰‹ï¼Œæ€»ä»·ï¼š${translog.total.toFixed(\n                        2\n                    )}å…ƒ[ä½£é‡‘${translog.commission.toFixed(\n                        2\n                    )}å…ƒï¼Œè¿‡æˆ·è´¹${translog.fee.toFixed(\n                        2\n                    )}ï¼Œå°èŠ±ç¨${translog.duty.toFixed(2)}å…ƒ], ${translog.memo}`\n                );\n                // debug(`è‚¡ç¥¨ä¿¡æ¯ï¼š%o`, stockInfo);\n                // debug(`è´¦æˆ·ä¿¡æ¯ï¼š%o`, capitalData);\n                // return translog;\n            }\n        }\n    }\n}\n\n/**\n * æ ¹æ®äº¤æ˜“è®°å½•å®Œæˆè´¦æˆ·æ¸…ç®—\n * @param {*} stockInfo è‚¡ç¥¨ä¿¡æ¯\n * @param {*} translog äº¤æ˜“è®°å½•\n * @param {*} capitalData è´¦æˆ·æ•°æ®\n * @param {*} options é…ç½®å‚æ•°\n */\nfunction executeCapitalSettlement(stockInfo, translog, capitalData, options) {\n    // debug(`æ‰§è¡Œæ¸…ç®— %o`, translog);\n    if (_.isEmpty(translog)) return false;\n    // å¦‚æœéå›ºå®šå¤´å¯¸ï¼Œæ£€æŸ¥å½“å‰æä¾›çš„äº¤æ˜“ä½™é¢æ˜¯å¦å¯æ‰§è¡Œ\n    if (!options.fixCash && translog.total + capitalData.balance < 0) {\n        debug(\n            `è´¦æˆ·ä½™é¢${capitalData.balance}ä¸è¶³(${\n                translog.total\n            })ï¼Œæ— æ³•å®Œæˆæ¸…ç®—ï¼Œäº¤æ˜“å–æ¶ˆ! äº¤æ˜“ä¿¡æ¯: ${\n                translog.type === \"buy\" ? \"ä¹°å…¥\" : \"å–å‡º\"\n            }${stockInfo.ts_code} ${translog.count}è‚¡ï¼Œä»·æ ¼${\n                translog.price\n            }ï¼Œå…±è®¡${translog.total}å…ƒ[å«ä½£é‡‘${translog.commission}å…ƒï¼Œè¿‡æˆ·è´¹${\n                translog.fee\n            }ï¼Œå°èŠ±ç¨${translog.duty}å…ƒ]`\n        );\n        return false;\n    }\n\n    // å¤„ç†äº¤æ˜“ä¿¡æ¯\n    capitalData.balance += translog.total;\n    // å¦‚æœå½“å‰ä¹°å…¥ï¼Œstockä¸­æ”¾ç½®æŒè‚¡ä¿¡æ¯å’Œä¹°å…¥äº¤æ˜“æ—¥å¿—ï¼Œåªæœ‰å–å‡ºå‘ç”Ÿæ—¶æ‰åˆå¹¶ç”Ÿæˆä¸€æ¡äº¤æ˜“è®°å½•ï¼ŒåŒ…å«ä¸¤ä¸ªéƒ¨åˆ†\n    if (translog.type === \"buy\") {\n        capitalData.stocks.push({\n            transeq: translog.transeq,\n            count: translog.count,\n            price: translog.price,\n            buy: translog,\n        });\n    } else {\n        let stock;\n        for (let i = 0; i < capitalData.stocks.length; i++) {\n            if (capitalData.stocks[i].transeq === translog.transeq) {\n                stock = capitalData.stocks[i];\n                capitalData.stocks.splice(i, 1);\n                break;\n            }\n        }\n        if (!stock) {\n            debug(\n                `æ²¡æœ‰æ‰¾åˆ°è¦æ‰§è¡Œçš„äº¤æ˜“åºå·ï¼š${translog.transeq}, %o`,\n                capitalData.stocks\n            );\n            return false;\n        }\n\n        let settledlog = {\n            transeq: stock.transeq,\n            tradeDate: translog.date,\n            profit: stock.buy.total + translog.total,\n            income: translog.count * translog.price - stock.count * stock.price,\n            buy: stock.buy,\n            sell: translog,\n        };\n        // capitalData.stock = {\n        //     //info: null,\n        //     count: 0,\n        //     price: 0,\n        // };\n        capitalData.transactions.push(settledlog);\n    }\n    // debug(\"å®Œæˆæ¸…ç®—ï¼\");\n    return true;\n}\n\n/**\n * åˆ›å»ºæŒ‡å®šæ—¥æœŸå’Œè‚¡ç¥¨ä¿¡æ¯çš„å–å‡ºäº¤æ˜“\n * @param {*} stockInfo\n * @param {*} tradeDate\n * @param {*} tradeDateIndex\n * @param {*} count\n * @param {*} price\n * @param {*} memo\n */\nfunction createSellTransaction(\n    stockInfo,\n    tradeDate,\n    tradeDateIndex,\n    count,\n    price,\n    methodType,\n    memo\n) {\n    // è®¡ç®—è´¹ç”¨\n    let total = calculateTransactionFee(false, stockInfo, count, price);\n    // åˆ›å»ºå–å‡ºäº¤æ˜“è®°å½•\n    return {\n        date: tradeDate,\n        dateIndex: tradeDateIndex,\n        type: \"sell\",\n        count,\n        price,\n        total: total.total,\n        amount: total.amount,\n        fee: total.fee,\n        commission: total.commission,\n        duty: total.duty,\n        methodType,\n        memo,\n    };\n}\n\n/**\n * æ„å»ºä¹°å…¥äº¤æ˜“ä¿¡æ¯\n * @param {*} stockInfo è‚¡ç¥¨ä¿¡æ¯\n * @param {*} tradeDate äº¤æ˜“æ—¥æœŸ\n * @param {*} tradeDateIndex äº¤æ˜“æ—¥æœŸç´¢å¼•ï¼ˆæ–¹ä¾¿ç”¨äºè®¡ç®—äº¤æ˜“æ—¥æ•°ï¼‰\n * @param {*} balance å¯ç”¨ä½™é¢\n * @param {*} price ä¹°å…¥ä»·æ ¼\n * @param {*} memo äº¤æ˜“å¤‡æ³¨\n */\nfunction createBuyTransaction(\n    stockInfo,\n    tradeDate,\n    tradeDateIndex,\n    balance,\n    price,\n    methodType,\n    memo\n) {\n    // è®¡ç®—è´¹ç”¨\n    let count = parseInt(balance / price / 100) * 100;\n    // æœ€å°äº¤æ˜“å•ä½ä¸º1æ‰‹ï¼Œèµ„é‡‘ä¸è¶³æ”¾å¼ƒï¼\n    if (count < 100) return;\n    let total = calculateTransactionFee(true, stockInfo, count, price);\n    while (total.total + balance < 0) {\n        count -= 100;\n        if (count < 100) return;\n        total = calculateTransactionFee(true, stockInfo, count, price);\n    }\n    // åˆ›å»ºä¹°å…¥äº¤æ˜“è®°å½•\n    return {\n        date: tradeDate,\n        dateIndex: tradeDateIndex,\n        type: \"buy\",\n        count: count,\n        price,\n        total: total.total,\n        amount: total.amount,\n        fee: total.fee,\n        commission: total.commission,\n        duty: total.duty,\n        methodType,\n        memo,\n    };\n}\n\n/**\n * è®¡ç®—äº¤æ˜“ä»·æ ¼å’Œè´¹ç”¨\n * @param {boolean}} buy ä¹°å–æ ‡è®°\n * @param {*} stockInfo è‚¡ç¥¨ä¿¡æ¯\n * @param {*} count ä¹°å–æ•°é‡\n * @param {*} price ä¹°å–å•ä»·\n */\nfunction calculateTransactionFee(buy, stockInfo, count, price) {\n    let amount = count * price;\n    let commission = (amount * 0.25) / 1000;\n    let fee = 0.0;\n    let duty = 0.0;\n    if (stockInfo.exchange === \"SSE\") {\n        // ä¸Šæµ·ï¼Œè¿‡æˆ·è´¹åƒåˆ†ä¹‹0.2\n        fee += (amount * 0.02) / 1000;\n    } else if (stockInfo.exchange === \"SZSE\") {\n        // æ·±åœ³ï¼Œæ— \n    }\n    // å°èŠ±ç¨ï¼Œä»…å¯¹å–æ–¹æ”¶å–\n    if (!buy) {\n        duty += (amount * 1) / 1000;\n    }\n\n    let total = 0.0;\n    if (buy) {\n        total = 0 - (amount + commission + fee + duty);\n    } else {\n        total = amount - commission - fee - duty;\n    }\n\n    return { total, amount, commission, fee, duty };\n}\n\nfunction parseCapitalReports(capitalData) {\n    if (_.isEmpty(capitalData)) return;\n    // è´¦æˆ·ä¿¡æ¯ä¸­ä¸»è¦éœ€åˆ†æäº¤æ˜“è¿‡ç¨‹ï¼Œæ­£å¸¸éƒ½æ˜¯ä¸ºä¸€æ¬¡ä¹°å…¥ï¼Œä¸€æ¬¡å–å‡ºï¼Œè¿™æ ·ä½œä¸ºä¸€ç»„äº¤æ˜“ï¼Œè·å¾—ä¸€æ¬¡ç›ˆåˆ©ç»“æœ\n    let count = capitalData.transactions.length;\n    let count_win = 0;\n    let total_win = 0;\n    let count_loss = 0;\n    let total_loss = 0;\n    let total_profit = 0;\n    let total_fee = 0;\n    let max_profit = 0;\n    let max_loss = 0;\n    let average_profit = 0;\n    let average_win = 0;\n    let average_loss = 0;\n    let max_wintimes = 0; // è¿ç»­ç›ˆåˆ©æ¬¡æ•°\n    let max_losstimes = 0; // è¿ç»­äºæŸæ¬¡æ•°\n    let max_windays = 0;\n    let max_lossdays = 0;\n    let average_windays = 0;\n    let average_lossdays = 0;\n    // {times: æ€»æ¬¡æ•°, win_times: ç›ˆåˆ©æ¬¡æ•°, loss_times: æŸå¤±æ¬¡æ•°}\n    let selltypes = {};\n    //let selltype_times = {};\n\n    // æ”¶ç›Šç‡ï¼šè¡¨ç¤ºå•ä½æˆæœ¬çš„æ”¶å…¥æ¯”ä¾‹\n    let ror_win = 0;\n    let ror_loss = 0;\n    let ror = 0;\n\n    let tmp_cost = 0;\n    let tmp_cost_win = 0;\n    let tmp_cost_loss = 0;\n\n    let currentType = 0;\n    let tmp_times = 0;\n    let tmp_windays = 0;\n    let tmp_lossdays = 0;\n    for (let log of capitalData.transactions) {\n        let days = log.sell.dateIndex - log.buy.dateIndex + 1;\n\n        let selltype = selltypes[log.sell.methodType];\n        if (!selltype) {\n            selltypes[log.sell.methodType] = {\n                times: 0,\n                win_times: 0,\n                loss_times: 0,\n            };\n        }\n        selltypes[log.sell.methodType].times += 1;\n\n        if (log.profit >= 0) {\n            count_win++;\n            total_win += log.profit;\n            tmp_cost_win += -log.buy.total;\n            if (max_profit < log.profit) max_profit = log.profit;\n\n            tmp_windays += days;\n            if (max_windays < days) max_windays = days;\n\n            // è¿ç»­è®¡æ•°\n            if (currentType === 1) {\n                tmp_times++;\n            } else {\n                if (currentType === -1) {\n                    if (max_losstimes < tmp_times) max_losstimes = tmp_times;\n                }\n                // åˆå§‹åŒ–\n                currentType = 1;\n                tmp_times = 1;\n            }\n\n            selltypes[log.sell.methodType].win_times += 1;\n        } else {\n            count_loss++;\n            total_loss += log.profit;\n            tmp_cost_loss += -log.buy.total;\n            if (max_loss > log.profit) max_loss = log.profit;\n\n            tmp_lossdays += days;\n            if (max_lossdays < days) max_lossdays = days;\n\n            // è¿ç»­è®¡æ•°\n            if (currentType === -1) {\n                tmp_times++;\n            } else {\n                if (currentType === 1) {\n                    if (max_wintimes < tmp_times) max_wintimes = tmp_times;\n                }\n                // åˆå§‹åŒ–\n                currentType = -1;\n                tmp_times = 1;\n            }\n\n            selltypes[log.sell.methodType].loss_times += 1;\n        }\n\n        total_profit += log.profit;\n        total_fee +=\n            log.buy.commission +\n            log.buy.fee +\n            log.buy.duty +\n            (log.sell.commission + log.sell.fee + log.sell.duty);\n        tmp_cost += -log.buy.total;\n    }\n\n    if (currentType === 1) {\n        if (max_wintimes < tmp_times) max_wintimes = tmp_times;\n    } else if (currentType === -1) {\n        if (max_losstimes < tmp_times) max_losstimes = tmp_times;\n    }\n\n    average_profit = total_profit / count;\n    average_win = total_win / count_win;\n    average_loss = -total_loss / count_loss;\n\n    average_windays = Number((tmp_windays / count_win).toFixed(1));\n    average_lossdays = Number((tmp_lossdays / count_loss).toFixed(1));\n\n    ror = total_profit / tmp_cost;\n    ror_win = total_win / tmp_cost_win;\n    ror_loss = total_loss / tmp_cost_loss;\n\n    return {\n        count,\n        total_profit,\n        total_fee,\n        count_win,\n        total_win,\n        count_loss,\n        total_loss,\n        max_profit,\n        max_loss,\n        average_profit,\n        average_win,\n        average_loss,\n        max_wintimes,\n        max_losstimes,\n        max_windays,\n        max_lossdays,\n        average_windays,\n        average_lossdays,\n        selltypes,\n\n        ror,\n        ror_win,\n        ror_loss,\n    };\n}\n\nfunction showCapitalReports(log, capitalData) {\n    log(\n        `******************************************************************************************`\n    );\n    // log(\n    //     \"*                                                                                                                      *\"\n    // );\n    if (capitalData.stocks && capitalData.stocks.length > 0) {\n        let stockvalue = 0;\n        for (let stock of capitalData.stocks) {\n            stockvalue += stock.count * stock.price;\n        }\n        log(\n            `  è´¦æˆ·ä»·å€¼ ${formatFxstr(\n                capitalData.balance + stockvalue\n            )}å…ƒ  ã€ä½™é¢ ${formatFxstr(\n                capitalData.balance\n            )}å…ƒ, æŒè‚¡: ${formatFxstr(stockvalue)}å…ƒã€‘`\n        );\n    } else {\n        log(`  è´¦æˆ·ä½™é¢ ${formatFxstr(capitalData.balance)}å…ƒ`);\n    }\n\n    let capitalResult = parseCapitalReports(capitalData);\n    // log(``);\n    log(\n        `  æ€»å‡€åˆ©æ¶¦ï¼š${formatFxstr(capitalResult.total_profit)},  æ”¶ç›Šç‡ ${(\n            capitalResult.ror * 100\n        ).toFixed(2)}%`\n    );\n    log(\n        `  æ¯›åˆ©æ¶¦ï¼š ${formatFxstr(\n            capitalResult.total_win\n        )},  æ€»äºæŸï¼š${formatFxstr(capitalResult.total_loss)}`\n    );\n    log(\n        `  ç›ˆåˆ©æ”¶ç›Šç‡ï¼š ${(capitalResult.ror_win * 100).toFixed(\n            2\n        )}%,  äºæŸæ”¶ç›Šç‡ï¼š${(capitalResult.ror_loss * 100).toFixed(2)}%`\n    );\n    log(\"\");\n    log(\n        `  æ€»äº¤æ˜“æ¬¡æ•°ï¼š ${capitalResult.count},  åˆ©æ¶¦ç‡ï¼š${(\n            (capitalResult.count_win * 100) /\n            capitalResult.count\n        ).toFixed(1)}%`\n    );\n    log(\n        `  æ€»ç›ˆåˆ©æ¬¡æ•°ï¼š ${capitalResult.count_win},  æ€»äºæŸæ¬¡æ•°ï¼š${capitalResult.count_loss}`\n    );\n    log(\"\");\n    log(\n        `  æœ€å¤§å•ç¬”ç›ˆåˆ©ï¼š ${formatFxstr(\n            capitalResult.max_profit\n        )},  æœ€å¤§å•ç¬”äºæŸï¼š${formatFxstr(capitalResult.max_loss)}`\n    );\n    log(\n        `  å¹³å‡ç›ˆåˆ©ï¼š ${formatFxstr(\n            capitalResult.average_win\n        )},  å¹³å‡äºæŸï¼š${formatFxstr(capitalResult.average_loss)}`\n    );\n    log(\n        `  å¹³å‡ç›ˆåˆ©/å¹³å‡äºæŸï¼š ${(\n            capitalResult.average_win / capitalResult.average_loss\n        ).toFixed(2)},  å¹³å‡æ¯ç¬”æ€»ç›ˆåˆ©ï¼š${formatFxstr(\n            capitalResult.average_profit\n        )}`\n    );\n    log(\"\");\n    log(\n        `  æœ€å¤šè¿ç»­ç›ˆåˆ©æ¬¡æ•°ï¼š ${capitalResult.max_wintimes},  æœ€å¤šè¿ç»­äºæŸæ¬¡æ•°ï¼š${capitalResult.max_losstimes}`\n    );\n    log(\n        `  ç›ˆåˆ©æœ€å¤šæŒæœ‰å¤©æ•°ï¼š ${capitalResult.max_windays},  äºæŸæœ€å¤šæŒæœ‰å¤©æ•°ï¼š${capitalResult.max_lossdays}`\n    );\n    log(\n        `  ç›ˆåˆ©å¹³å‡æŒæœ‰å¤©æ•°ï¼š ${capitalResult.average_windays},  äºæŸå¹³å‡æŒæœ‰å¤©æ•°ï¼š${capitalResult.average_lossdays}`\n    );\n\n    log(\"\");\n    for (let methodType in capitalResult.selltypes) {\n        let selltype = capitalResult.selltypes[methodType];\n        log(\n            `  å–å‡ºç±»å‹${methodType} å…±${selltype.times}æ¬¡,  ç›ˆåˆ©${selltype.win_times}æ¬¡ï¼Œ æŸå¤±${selltype.loss_times}æ¬¡`\n        );\n    }\n    // log(\n    //     \"*                                                                                                                      *\"\n    // );\n    log(\n        `******************************************************************************************`\n    );\n    log(\"\");\n}\n\nfunction showTransactions(log, capitalData) {\n    log(`  äº¤æ˜“æ—¥å¿—åˆ†æ\n******************************************************************************************`);\n    for (let translog of capitalData.transactions) {\n        log(logTransaction(translog));\n    }\n    if (capitalData.stock && capitalData.stock.count > 0) {\n        let holdlog = { buy: capitalData.stock.buy };\n        log(logTransaction(holdlog));\n    }\n    log(\n        `******************************************************************************************`\n    );\n}\n\n// settledlog = {\n//     transeq: äº¤æ˜“åºå·\n//     tradeDate: translog.tradeDate,\n//     profit: capitalData.stock.buy.total + translog.total,\n//     income:\n//         translog.count * translog.price -\n//         capitalData.stock.count * capitalData.stock.price,\n//     buy: capitalData.stock.buy,\n//     sell: translog,\n// };\n// trans: {\n// date: tradeDate.format(\"YYYYMMDD\"),\n// dateIndex: tradeDateIndex,\n// type: \"sell\",\n// count,\n// price,\n// total: total.total,\n// amount: total.amount,\n// fee: total.fee,\n// commission: total.commission,\n// duty: total.duty,\n// methodType,\n// memo,\n// }\nfunction logTransaction(translog) {\n    if (!translog) return \"\";\n    let buy = translog.buy;\n    let sell = translog.sell;\n    if (sell) {\n        return `æ”¶å…¥ï¼š${formatFxstr(translog.profit)}, æŒæœ‰ ${\n            sell.dateIndex - buy.dateIndex + 1\n        }å¤©ï¼Œç›ˆåˆ© ${(-(translog.profit * 100) / buy.total).toFixed(2)}%, ${\n            translog.transeq\n        }\n       [ä¹°å…¥ ${buy.date}, ${formatFxstr(buy.price)}, ${\n            buy.count\n        }, ${formatFxstr(buy.total)}, ${buy.transeq}] \n       [å–å‡º ${sell.date}, ${formatFxstr(sell.price)}, ${\n            sell.count\n        }, ${formatFxstr(sell.total)}, ${sell.methodType}, ${sell.memo}, ${\n            sell.transeq\n        }]`;\n    } else {\n        // æŒæœ‰æœªå–å‡º\n        return `æ”¶å…¥ï¼š---, æŒæœ‰ ---å¤©ï¼Œç›ˆåˆ© ---\n       [ä¹°å…¥ ${buy.date}, ${formatFxstr(buy.price)}, ${\n            buy.count\n        }, ${formatFxstr(buy.total)}]`;\n    }\n}\n\nexport default {\n    executeTransaction,\n    executeCapitalSettlement,\n    createSellTransaction,\n    createBuyTransaction,\n    calculateTransactionFee,\n    parseCapitalReports,\n    showCapitalReports,\n    showTransactions,\n};\n","import moment from \"moment\";\nimport CG from \"console-grid\";\nimport debugpkg from \"debug\";\nconst debug = debugpkg(\"reports\");\n\nfunction parseWorkdayReports(transactions) {\n    if (!transactions || transactions.length <= 0) return;\n    // æŠ¥å‘ŠåŒ…å«5+1è¡Œä¿¡æ¯ï¼Œ1-5å¯¹åº”å‘¨ä¸€åˆ°å‘¨äº”çš„ä¿¡æ¯ï¼Œ0è¡¨ç¤ºæ±‡æ€»\n    // æ¯è¡Œä¿¡æ¯åŒ…æ‹¬ï¼šcount(äº¤æ˜“æ¬¡æ•°), win_ratio(ç›ˆåˆ©æ¯”ä¾‹)ï¼Œwin(å¹³å‡ç›ˆåˆ©é‡‘é¢)ï¼Œ\n    //      loss_ratio(äºæŸæ¯”ä¾‹) ï¼Œlossï¼ˆå¹³å‡äºæŸé‡‘é¢ï¼‰ï¼Œratio_winloss(ç›ˆåˆ©äºæŸæ¯”),\n    //      average(å¹³å‡äº¤æ˜“è§„æ¨¡), max_lossï¼ˆæœ€å¤§äºæŸï¼‰ï¼Œprofit(åˆ©æ¶¦)\n    let results = [\n        {\n            day: \"\",\n            count: 0,\n            count_win: 0,\n            count_loss: 0,\n            win_ratio: 0,\n            win: 0,\n            loss_ratio: 0,\n            loss: 0,\n            ratio_winloss: 0,\n            average: 0,\n            max_win: 0,\n            max_loss: 0,\n            profit: 0,\n        },\n        {\n            day: \"å‘¨ä¸€\",\n            count: 0,\n            count_win: 0,\n            count_loss: 0,\n            win_ratio: 0,\n            win: 0,\n            loss_ratio: 0,\n            loss: 0,\n            ratio_winloss: 0,\n            average: 0,\n            max_win: 0,\n            max_loss: 0,\n            profit: 0,\n        },\n        {\n            day: \"å‘¨äºŒ\",\n            count: 0,\n            count_win: 0,\n            count_loss: 0,\n            win_ratio: 0,\n            win: 0,\n            loss_ratio: 0,\n            loss: 0,\n            ratio_winloss: 0,\n            average: 0,\n            max_win: 0,\n            max_loss: 0,\n            profit: 0,\n        },\n        {\n            day: \"å‘¨ä¸‰\",\n            count: 0,\n            count_win: 0,\n            count_loss: 0,\n            win_ratio: 0,\n            win: 0,\n            loss_ratio: 0,\n            loss: 0,\n            ratio_winloss: 0,\n            average: 0,\n            max_win: 0,\n            max_loss: 0,\n            profit: 0,\n        },\n        {\n            day: \"å‘¨å››\",\n            count: 0,\n            count_win: 0,\n            count_loss: 0,\n            win_ratio: 0,\n            win: 0,\n            loss_ratio: 0,\n            loss: 0,\n            ratio_winloss: 0,\n            average: 0,\n            max_win: 0,\n            max_loss: 0,\n            profit: 0,\n        },\n        {\n            day: \"å‘¨äº”\",\n            count: 0,\n            count_win: 0,\n            count_loss: 0,\n            win_ratio: 0,\n            win: 0,\n            loss_ratio: 0,\n            loss: 0,\n            ratio_winloss: 0,\n            average: 0,\n            max_win: 0,\n            max_loss: 0,\n            profit: 0,\n        },\n    ];\n\n    for (let trans of transactions) {\n        let buy = trans.buy;\n        // let sell = trans.sell;\n        let date = moment(buy.date, \"YYYYMMDD\");\n        let day = date.day();\n        if (day < 1 && day > 5) {\n            // è¶…å‡ºäº†å‘¨ä¸€ï½å‘¨äº”çš„èŒƒå›´ï¼Œè·³è¿‡è¿™ä¸ªæ—¥æœŸ\n            debug(`${buy.tradeDate}äº¤æ˜“è¶…å‡ºæ˜ŸæœŸèŒƒå›´ï¼š${day}, %o`, trans);\n            continue;\n        }\n\n        let days = [0, day];\n        // console.log(`%o`, days);\n        // console.log(\n        //     `%o, ${buy.tradeDate}, ${date}, ${day}, %o %o`,\n        //     trans,\n        //     days,\n        //     results\n        // );\n        for (let index of days) {\n            let res = results[index];\n            res.count++;\n            res.profit += trans.profit;\n            if (trans.profit >= 0) {\n                res.count_win++;\n                res.win += trans.profit;\n                if (res.max_win < trans.profit) res.max_win = trans.profit;\n            } else {\n                res.count_loss++;\n                res.loss += trans.profit;\n                if (res.max_loss > trans.profit) res.max_loss = trans.profit;\n            }\n            // console.log(`${index}, %o`, res);\n        }\n    }\n    for (let res of results) {\n        res.win_ratio = res.count_win / res.count;\n        res.win = res.win / res.count_win;\n        res.loss_ratio = res.count_loss / res.count;\n        res.loss = res.loss / res.count_loss;\n        res.ratio_winloss = res.win / res.loss;\n        res.average = res.profit / res.count;\n    }\n    return results;\n}\n\nfunction showWorkdayReports(log, transactions) {\n    let reports = parseWorkdayReports(transactions);\n    // console.log(\"%o\", reports);\n\n    //     let days = [\"æ€»è®¡\", \"å‘¨ä¸€\", \"å‘¨äºŒ\", \"å‘¨ä¸‰\", \"å‘¨å››\", \"å‘¨äº”\"];\n    //     log(`\n    // å·¥ä½œæ—¥    äº¤æ˜“æ¬¡æ•°    ç›ˆåˆ©æ¯”ä¾‹    å¹³å‡ç›ˆåˆ©    äºæŸæ¯”ä¾‹    å¹³å‡äºæŸ    ç›ˆäºæ¯”    å¹³å‡åˆ©æ¶¦    æœ€å¤§äºæŸ    åˆ©æ¶¦`);\n    //     for (let report of reports) {\n    //         log(\n    //             `${report.day}       ${report.count}          ${(\n    //                 report.win_ratio * 100\n    //             ).toFixed(1)}%    ${report.win.toFixed(2)}    ${(\n    //                 report.loss_ratio * 100\n    //             ).toFixed(1)}%    ${report.loss.toFixed(\n    //                 2\n    //             )}    ${report.ratio_winloss.toFixed(\n    //                 2\n    //             )}    ${report.average.toFixed(2)}    ${report.max_loss.toFixed(\n    //                 2\n    //             )}    ${report.profit.toFixed(2)}`\n    //         );\n    //     }\n\n    // é‡‡ç”¨console-gridæ‰“å°æ ¼å¼\n    let grid = new CG();\n    let CGS = CG.Style;\n    let columns = [\n        { id: \"workday\", name: \"æ—¥æœŸ\", type: \"string\", align: \"left\" },\n        { id: \"count\", name: \"äº¤æ˜“æ¬¡æ•°\", type: \"number\", align: \"right\" },\n        { id: \"win_ratio\", name: \"ç›ˆåˆ©æ¯”ä¾‹\", type: \"number\", align: \"right\" },\n        { id: \"win_average\", name: \"å¹³å‡ç›ˆåˆ©\", type: \"number\", align: \"right\" },\n        { id: \"loss_ratio\", name: \"äºæŸæ¯”ä¾‹\", type: \"number\", align: \"right\" },\n        {\n            id: \"loss_average\",\n            name: \"å¹³å‡äºæŸ\",\n            type: \"number\",\n            align: \"right\",\n        },\n        { id: \"ratio_winloss\", name: \"ç›ˆäºæ¯”\", type: \"number\", align: \"right\" },\n        {\n            id: \"profit_average\",\n            name: \"å¹³å‡åˆ©æ¶¦\",\n            type: \"number\",\n            align: \"right\",\n        },\n        { id: \"max_loss\", name: \"æœ€å¤§äºæŸ\", type: \"number\", align: \"right\" },\n        { id: \"profit\", name: \"åˆ©æ¶¦\", type: \"number\", align: \"right\" },\n    ];\n    let rows = [];\n    for (let report of reports) {\n        rows.push({\n            workday: report.day,\n            count: report.count,\n            win_ratio:\n                report.win_ratio >= 0.5\n                    ? CGS.red(`${(report.win_ratio * 100).toFixed(1)}%`)\n                    : CGS.green(`${(report.win_ratio * 100).toFixed(1)}%`),\n            win_average: `${report.win.toFixed(2)}`,\n            loss_ratio: `${(report.loss_ratio * 100).toFixed(1)}%`,\n            loss_average: `${report.loss.toFixed(2)}`,\n            ratio_winloss: `${(-report.ratio_winloss).toFixed(2)}`,\n            profit_average: `${report.average.toFixed(2)}`,\n            max_loss: `${report.max_loss.toFixed(2)}`,\n            profit: `${report.profit.toFixed(2)}`,\n        });\n    }\n    let data = {\n        option: {},\n        columns,\n        rows,\n    };\n    grid.render(data);\n\n    // é‡‡ç”¨console-table-printeråº“æ‰“å°æ ¼å¼\n    // const p = new Table({\n    //     columns: [\n    //         { name: \"workday\", alignment: \"center\" },\n    //         { name: \"count\", alignment: \"right\" },\n    //         { name: \"win ratio\", alignment: \"right\" },\n    //         { name: \"win/trade\", alignment: \"right\" },\n    //         { name: \"loss ratio\", alignment: \"right\" },\n    //         { name: \"loss/trade\", alignment: \"right\" },\n    //         { name: \"ratio win/loss\", alignment: \"right\" },\n    //         { name: \"profit/trade\", alignment: \"right\" },\n    //         { name: \"max loss\", alignment: \"right\" },\n    //         { name: \"profit\", alignment: \"right\" },\n    //     ],\n    // });\n    // for (let report of reports) {\n    //     p.addRow(\n    //         {\n    //             workday: report.day,\n    //             count: report.count,\n    //             \"win ratio\": `${(report.win_ratio * 100).toFixed(1)}%`,\n    //             \"win/trade\": `${report.win.toFixed(2)}`,\n    //             \"loss ratio\": `${(report.loss_ratio * 100).toFixed(1)}%`,\n    //             \"loss/trade\": `${report.loss.toFixed(2)}`,\n    //             \"ratio win/loss\": `${(-report.ratio_winloss).toFixed(2)}`,\n    //             \"profit/trade\": `${report.average.toFixed(2)}`,\n    //             \"max loss\": `${report.max_loss.toFixed(2)}`,\n    //             profit: `${report.profit.toFixed(2)}`,\n    //         },\n    //         { color: report.win_ratio > 0.5 ? \"red\" : \"green\" }\n    //     );\n    // }\n    // p.printTable();\n}\n\nexport { parseWorkdayReports, showWorkdayReports };\n\n//\n// {\n//     transeq: stock.transeq,\n//     tradeDate: translog.tradeDate,\n//     profit: stock.buy.total + translog.total,\n//     income: translog.count * translog.price - stock.count * stock.price,\n//     buy: stock.buy,\n//     sell: translog,\n// }\n// transaction\n// {\n//     date: tradeDate,\n//     dateIndex: tradeDateIndex,\n//     type: \"buy\",\n//     count: count,\n//     price,\n//     total: total.total,\n//     amount: total.amount,\n//     fee: total.fee,\n//     commission: total.commission,\n//     duty: total.duty,\n//     methodType,\n//     memo,\n// }\n","import {\n    readStockList,\n    readStockData,\n    stockDataNames,\n} from \"@wt/lib-wtda-query\";\n\nimport moment from \"moment\";\nimport _ from \"lodash\";\nimport debugpkg from \"debug\";\n\n// import { formatFxstr } from \"./util\";\n\n// import stoploss from \"./stoploss\";\n// import mmb from \"./momentum-breakthrough\";\nimport engine from \"./transaction-engine\";\nimport * as reports from \"./reports\";\n\nconst log = console.log;\nconst debug = debugpkg(\"sim\");\n\nasync function simulate(options) {\n    // é¦–å…ˆæ ¹æ®è®¾ç½®è·å¾—åˆ—è¡¨ï¼Œåˆ—è¡¨å†…å®¹ä¸ºéœ€è¦è¿›è¡Œç®—æ³•è®¡ç®—çš„å„ä¸ªè‚¡ç¥¨\n    //  TODO: è¿™é‡Œå…ˆè¯»å–å…¨éƒ¨çš„åˆ—è¡¨\n    let stockListData = await readStockList();\n    if (!stockListData || !stockListData.data) {\n        log(`æ²¡æœ‰è¯»å–åˆ°è‚¡ç¥¨åˆ—è¡¨ï¼Œæ— æ³•å¤„ç†æ—¥çº¿æ•°æ®`);\n        return;\n    }\n    let stockList = stockListData.data;\n    // é‡æ–°è¿‡æ»¤å¯ç”¨çš„\n    stockList = await filterStockList(stockList, options);\n    log(`ç®—æ³•æ‰§è¡Œ ${stockList && stockList.length} æ¡æ•°æ®`);\n    // dataå­˜æ”¾è‚¡ç¥¨åˆ—è¡¨çš„åŸºæœ¬ä¿¡æ¯ï¼š\n    // {\n    //      ts_code: '000001.SZ', symbol: '000001', name: 'å¹³å®‰é“¶è¡Œ',\n    //      market: 'ä¸»æ¿', exchange: 'SZSE',\n    //      area: 'æ·±åœ³', industry: 'é“¶è¡Œ', fullname: 'å¹³å®‰é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸',\n    //      enname: 'Ping An Bank Co., Ltd.', curr_type: 'CNY',\n    //      list_status: 'L', list_date: '19910403', delist_date: null, is_hs: 'S'\n    // }\n    // this.log(`%o`, stockList[0]);\n    // åç»­çš„æ‰§è¡Œä¸ºåˆ—è¡¨çš„å¾ªç¯è®¡ç®—ï¼Œè¿™é‡Œçš„ç®—æ³•å› ä¸ºä¸»è¦æ˜¯CPUè®¡ç®—ç±»å‹ï¼Œåªæœ‰è¾“å…¥å’Œè¾“å‡ºéƒ¨åˆ†æœ‰I/Oè¿ç®—ï¼Œå› æ­¤ä¸è€ƒè™‘\n\n    log(\"\");\n    // ä¸‹ä¸€æ­¥å¼€å§‹æŒ‰ç…§ç»™å‡ºçš„æ•°æ®å¾ªç¯è¿›è¡Œå¤„ç†\n    for (let stockItem of stockList) {\n        // this.log(`å¤„ç†æ•°æ®ï¼š%o`, stockItem);\n\n        // é¦–å…ˆè¯»å–æ—¥çº¿ä¿¡æ¯\n        let stockData = await readStockData(\n            stockDataNames.daily,\n            stockItem.ts_code\n        );\n        // å‡†å¤‡èµ„é‡‘è´¦æˆ·æ•°æ®\n        let capitalData = {\n            info: stockItem,\n            balance: options.fixCash ? 0 : options.initBalance, // åˆå§‹èµ„é‡‘\n            stocks: [], // æŒæœ‰çš„è‚¡ç¥¨ä¿¡æ¯ï¼Œæ¯æ¬¡ä¹°å…¥å•ç‹¬ä¸€ç¬”è®°å½•ï¼Œåˆ†åˆ«è¿›è¡Œå¤„ç†ï¼Œç»“æ„{ count: 0, price: 0, buy: transaction }, // æŒæœ‰è‚¡ç¥¨ä¿¡æ¯\n            transactions: [], // äº¤æ˜“è®°å½• {tradeDate: å®Œæˆæ—¥æœŸ, profit: åˆ©æ¶¦, income: æ”¶å…¥, buy: transaction, sell: transaction}\n            //transaction { date: , count: äº¤æ˜“æ•°é‡, price: äº¤æ˜“ä»·æ ¼, total: æ€»é‡‘é¢, amount: æ€»ä»·, fee: äº¤æ˜“è´¹ç”¨, memo: å¤‡æ³¨ä¿¡æ¯ }\n            _transeq: 0, // å½“å‰äº¤æ˜“åºå·ï¼Œè·å–åè¦è‡ªå·±å¢åŠ ï¼Œå¯¹åº”ä¸€æ¬¡è‚¡ç¥¨çš„ä¹°å–ä½¿ç”¨åŒä¸€ä¸ªåºå·\n        };\n        if (stockData) {\n            log(\n                `[${stockItem.ts_code}]${\n                    stockItem.name\n                } ã€æ•°æ®æ›´æ–°æ—¶é—´ï¼š${moment(stockData.updateTime).format(\n                    \"YYYY-MM-DD HH:mm\"\n                )}ã€‘`\n            );\n            // æ—¥çº¿æ•°æ®æ¡æ•° ${\n            //     stockData.data && stockData.data.length\n            // }, ä»${stockData.startDate}åˆ°${\n            //     stockData.endDate\n            // }ï¼Œ\n\n            // é¦–å…ˆè¿‡æ»¤å†å²æ•°æ®ï¼Œè¿™é‡Œå°†æ—¥çº¿æ•°æ®è°ƒæ•´ä¸ºæ­£å¸¸æ—¥æœŸä»å†å²åˆ°ç°åœ¨\n            stockData = await filterStockData(stockData);\n\n            // å…¨éƒ¨æ•°æ®è°ƒæ•´ä¸ºå‰å¤æƒåå†æ‰§è¡Œè®¡ç®—\n            calculatePrevAdjPrice(stockData);\n\n            // å¼€å§‹æŒ‰ç…§æ—¥æœŸæ‰§è¡Œäº¤æ˜“ç®—æ³•\n            let startDate = moment(options.startDate, \"YYYYMMDD\");\n            let currentDate = null;\n            for (let index = 0; index < stockData.data.length; index++) {\n                let daily = stockData.data[index];\n                let tradeDate = moment(daily.trade_date, \"YYYYMMDD\");\n                if (_.isEmpty(currentDate)) {\n                    if (startDate.isAfter(tradeDate)) {\n                        continue;\n                    }\n                    debug(\n                        `æ‰¾åˆ°å¼€å§‹æ—¥æœŸï¼Œå¼€å§‹æ‰§è¡Œç®—æ³•ï¼${index}, ${daily.trade_date}`\n                    );\n                } else {\n                    debug(`æ‰§è¡Œç®—æ³•ï¼${index}, ${daily.trade_date}`);\n                }\n                currentDate = tradeDate;\n                // this.log(`%o`, engine);\n                // let trans =\n                await engine.executeTransaction(\n                    index,\n                    stockData.data,\n                    capitalData,\n                    options\n                );\n            }\n\n            engine.showCapitalReports(log, capitalData);\n            if (options.showTrans) {\n                engine.showTransactions(log, capitalData);\n            }\n            if (options.showWorkdays) {\n                reports.showWorkdayReports(log, capitalData.transactions);\n            }\n        } else {\n            log(\n                `[${stockItem.ts_code}]${stockItem.name} æ²¡æœ‰æ—¥çº¿æ•°æ®ï¼Œè¯·æ£€æŸ¥ï¼`\n            );\n        }\n    }\n}\n\n/**\n * å°†æ—¥çº¿æ•°æ®ä¸­çš„å†å²ä»·ä½æ ¹æ®å¤æƒå› å­å…¨éƒ¨å¤„ç†ä¸ºå‰å¤æƒç»“æœï¼Œæ–¹ä¾¿åç»­è®¡ç®—\n *\n * @param {*} dailyData æ—¥çº¿æ•°æ®\n * @param {int} digits ä¿ç•™ä½æ•°\n */\nfunction calculatePrevAdjPrice(dailyData, digits = 2) {\n    if (dailyData && dailyData.data && dailyData.data.length > 0) {\n        dailyData.data.forEach((item) => {\n            if (item.prevadj_factor) {\n                item.open = Number(\n                    (item.open * item.prevadj_factor).toFixed(digits)\n                );\n                item.close = Number(\n                    (item.close * item.prevadj_factor).toFixed(digits)\n                );\n                item.high = Number(\n                    (item.high * item.prevadj_factor).toFixed(digits)\n                );\n                item.low = Number(\n                    (item.low * item.prevadj_factor).toFixed(digits)\n                );\n                item.pre_close = Number(\n                    (item.pre_close * item.prevadj_factor).toFixed(digits)\n                );\n                item.change = Number(\n                    (item.change * item.prevadj_factor).toFixed(digits)\n                );\n            }\n        });\n    }\n}\n\n/**\n * è¿™é‡Œå®šä¹‰ä¸€ä¸ªè¿‡æ»¤åˆ—è¡¨çš„æ¥å£æ–¹æ³•ï¼Œåˆ©ç”¨optionsæ¥è¿‡æ»¤åç»­ä½¿ç”¨çš„è‚¡ç¥¨\n * è¿”å›ä¸ºä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„åˆ—è¡¨\n * è¿™é‡Œåç»­è€ƒè™‘è°ƒæ•´ä¸€ä¸‹æ¥å£å®šä¹‰ï¼Œç›®å‰æš‚æ—¶ç®€åŒ–å¤„ç†\n */\nasync function filterStockList(stockList, options) {\n    // let retStockList = [];\n    return options.selectedStocks.map((tsCode) => {\n        let tmp = stockList.filter((item) => {\n            return item.ts_code === tsCode;\n        });\n        // console.log(`${tmp && tmp.length}, %o`, tmp[0]);\n        return tmp[0];\n    });\n}\n\n/**\n * è¿™é‡Œæä¾›å¯¹å•ä¸ªæ•°æ®çš„è°ƒæ•´ï¼Œä¸»è¦åº”å½“æ˜¯ä¸€äº›é¢å¤–çš„æ•°æ®è®¡ç®—æ·»åŠ ï¼Œå‘¨æœŸè¿‡æ»¤ç­‰\n *\n * @param {*} stockData è‚¡ç¥¨æ—¥çº¿æ•°æ®å¯¹è±¡\n * @param {*} options æ•°æ®è¿‡æ»¤æ¡ä»¶\n */\nasync function filterStockData(stockData, options) {\n    stockData.data.reverse();\n    return stockData;\n}\n\nexport default simulate;\n","import _ from \"lodash\";\nimport engine from \"./transaction-engine\";\n\nimport debugpkg from \"debug\";\nconst debug = debugpkg(\"mmb\");\n\nconst OPTIONS_NAME = \"mmb\";\n\n/**\n * æ£€æŸ¥ä¹°å…¥æ¡ä»¶\n * @param {*} stockInfo è‚¡ç¥¨ä¿¡æ¯\n * @param {double} balance è´¦æˆ·ä½™é¢\n * @param {*} tradeDate äº¤æ˜“æ—¥æœŸ\n * @param {int} index äº¤æ˜“æ—¥æ•°æ®ç´¢å¼•ä½ç½®\n * @param {*} stockData æ•°æ®\n * @param {*} options ç®—æ³•å‚æ•°\n */\nfunction checkMMBBuyTransaction(stockInfo, balance, index, stockData, options) {\n    if (balance <= 0) return;\n    // debug(`ä¹°å…¥æ£€æŸ¥: ${balance}, ${tradeDate}, %o, ${index}`, stockData);\n\n    let mmboptions = options && options[OPTIONS_NAME];\n    // å¹³å‡æ³¢å¹…çš„è®¡ç®—æ—¥æ•°\n    let N = mmboptions.N;\n    // æ³¢å¹…çªç ´çš„ç™¾åˆ†æ¯”\n    let P = mmboptions.P;\n\n    let moment = 0;\n    for (let i = 0; i < N; i++) {\n        if (index - i - 1 >= 0) {\n            let tmp = stockData[index - i - 1];\n            if (mmboptions.mmbType === \"hl\") {\n                moment += tmp.high - tmp.low;\n            } else {\n                moment += tmp.high - tmp.close;\n            }\n        }\n    }\n    moment = moment / N;\n\n    let currentData = stockData[index];\n    // console.log(`è·Ÿè¸ªä¿¡æ¯ï¼š ${stockData.length}, ${index}`, currentData);\n    let targetPrice = currentData.open + moment * P;\n    let tradeDate = stockData[index].trade_date;\n\n    debug(\n        `ä¹°å…¥æ¡ä»¶æ£€æŸ¥${tradeDate}: ${targetPrice.toFixed(2)}=${\n            currentData.open\n        }+${moment.toFixed(2)}*${P} [o: ${currentData.open}, h: ${\n            currentData.high\n        }, l: ${currentData.low}, c: ${currentData.close}, d: ${\n            currentData.trade_date\n        }]`\n    );\n    if (currentData.high >= targetPrice && currentData.open <= targetPrice) {\n        // æ‰§è¡Œä¹°å…¥äº¤æ˜“\n        debug(`ç¬¦åˆæ¡ä»¶ï¼š${tradeDate}`);\n        return engine.createBuyTransaction(\n            stockInfo,\n            tradeDate,\n            index,\n            balance,\n            targetPrice,\n            \"mmb\",\n            `åŠ¨èƒ½çªç ´ä¹°å…¥ ${targetPrice.toFixed(2)} (=${\n                currentData.open\n            }+${moment.toFixed(2)}*${(P * 100).toFixed(2)}%)`\n        );\n    }\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦å¯ä»¥ç”Ÿæˆå–å‡ºäº¤æ˜“ï¼Œå¦‚æœå¯ä»¥å–å‡ºï¼Œäº§ç”Ÿå–å‡ºäº¤æ˜“è®°å½•\n *\n * @param {*} info è‚¡ç¥¨ä¿¡æ¯\n * @param {*} stock æŒä»“ä¿¡æ¯\n * @param {*} index ä»Šæ—¥æ•°æ®ç´¢å¼•ä½ç½®\n * @param {*} stockData æ—¥çº¿æ•°æ®\n * @param {*} options ç®—æ³•å‚æ•°\n */\nfunction checkMMBSellTransaction(stockInfo, stock, index, stockData, options) {\n    if (_.isEmpty(stock) || stock.count <= 0) return;\n\n    // æ£€æŸ¥æ˜¯å¦ç¬¦åˆåŠ¨èƒ½çªç ´ä¹°å…¥æ¡ä»¶\n    // if (\n    //     !options.nommbsell &&\n    //     !_.isEmpty(\n    //         checkMMBBuyTransaction(\n    //             stockInfo,\n    //             options.initBalance,\n    //             index,\n    //             stockData,\n    //             options\n    //         )\n    //     )\n    // ) {\n    //     // å¯ä»¥ä¹°å…¥ï¼Œé‚£ä¹ˆå½“æ—¥ä¿æŒ\n    //     return;\n    // }\n\n    let currentData = stockData[index];\n    let tradeDate = currentData.trade_date;\n    let mmboptions = options && options[OPTIONS_NAME];\n\n    // ç›®å‰æœ‰æŒä»“ï¼Œæ£€æŸ¥æ˜¯å¦è¾¾åˆ°ç›ˆåˆ©å–å‡ºæ¡ä»¶\n    if (!mmboptions.nommb1 && currentData.open > stock.price) {\n        // é‡‡ç”¨ç¬¬äºŒå¤©å¼€ç›˜ä»·ç›ˆåˆ©å°±å–å‡ºçš„ç­–ç•¥\n        debug(\n            `å¼€ç›˜ç›ˆåˆ©ç­–ç•¥ç¬¦åˆï¼š${currentData.open.toFixed(\n                2\n            )} (> ${stock.price.toFixed(2)})`\n        );\n        return engine.createSellTransaction(\n            stockInfo,\n            tradeDate,\n            index,\n            stock.count,\n            currentData.open,\n            \"mmb1\",\n            `å¼€ç›˜ç›ˆåˆ©å–å‡º ${currentData.open} (> ${stock.price.toFixed(2)})`\n        );\n    }\n\n    if (!mmboptions.nommb2) {\n        // å¹³å‡æ³¢å¹…çš„è®¡ç®—æ—¥æ•°\n        let N = mmboptions.N;\n        // æ­¢æŸä½¿ç”¨çš„æ³¢å¹…ä¸‹é™ç™¾åˆ†æ¯”\n        let L = mmboptions.L;\n        // æœ‰æŒä»“ï¼Œæ£€æŸ¥æ˜¯å¦è¾¾åˆ°å–å‡ºæ¡ä»¶\n        // ç¬¬ä¸€ä¸ªå–å‡ºæ¡ä»¶æ˜¯ä¹°å…¥åæŒ‰ç…§ä¹°å…¥ä»·æ ¼åŠæ³¢åŠ¨æ•°æ®çš„åå‘ç™¾åˆ†æ¯”è®¾ç½®\n        let moment = 0;\n        for (let i = 0; i < N; i++) {\n            if (index - i - 1 >= 0) {\n                let tmp = stockData[index - i - 1];\n                if (mmboptions.mmbType === \"hl\") {\n                    moment += tmp.high - tmp.low;\n                } else {\n                    moment += tmp.high - tmp.close;\n                }\n            }\n        }\n        moment = moment / N;\n\n        let targetPrice = currentData.open - moment * L;\n        if (targetPrice <= currentData.open && targetPrice >= currentData.low) {\n            // æ‰§è¡Œæ³¢åŠ¨å–å‡º\n            return engine.createSellTransaction(\n                stockInfo,\n                tradeDate,\n                index,\n                stock.count,\n                targetPrice,\n                \"mmb2\",\n                `åŠ¨èƒ½çªç ´å–å‡ºï¼š${targetPrice.toFixed(2)} (= ${\n                    currentData.open\n                }-${moment.toFixed(2)}*${L * 100}%)`\n            );\n        }\n    }\n}\n\n/**\n * è¿”å›å‚æ•°é…ç½®çš„æ˜¾ç¤ºä¿¡æ¯\n * @param {*}} opions å‚æ•°é…ç½®\n */\nfunction showOptions(options) {\n    return `\næ¨¡å‹ ${mmb.name}[${mmb.label}] å‚æ•°ï¼š\næ³¢å¹…ç±»å‹ [${options.mmb.mmbType === \"hc\" ? \"æœ€é«˜-æ”¶ç›˜\" : \"æœ€é«˜-æœ€ä½\"}]\nåŠ¨èƒ½å¹³å‡å¤©æ•°: ${options.mmb.N}\nåŠ¨èƒ½çªç ´ä¹°å…¥æ¯”ä¾‹: ${options.mmb.P * 100}%\nåŠ¨èƒ½çªç ´å–å‡ºæ¯”ä¾‹: ${options.mmb.L * 100}%\nè§„åˆ™ï¼š\n  1. [${options.mmb.nommb1 ? \"ğŸš«\" : \"âœ…\"}] å¼€ç›˜ç›ˆåˆ©é”å®š\n  2. [${options.mmb.nommb2 ? \"ğŸš«\" : \"âœ…\"}] åŠ¨èƒ½å‘ä¸‹çªç ´å–å‡º\n`;\n}\n\nlet mmb = {\n    name: \"MMB(åŠ¨èƒ½ç©¿é€)\",\n    label: \"mmb\",\n    description: \"åŠ¨èƒ½ç©¿é€\",\n    methodTyps: {\n        mmb: \"åŠ¨èƒ½çªç ´ä¹°å…¥\",\n        mmb1: \"å¼€ç›˜ç›ˆåˆ©å–å‡º\",\n        mmb2: \"åŠ¨èƒ½çªç ´å–å‡º\",\n    },\n    checkBuyTransaction: checkMMBBuyTransaction,\n    checkSellTransaction: checkMMBSellTransaction,\n    showOptions,\n};\n\nexport default mmb;\n","// const _ = require(\"lodash\");\nimport _ from \"lodash\";\n// const engine = require(\"./transaction-engine\");\nimport engine from \"./transaction-engine\";\n\nimport debugpkg from \"debug\";\nconst debug = debugpkg(\"stoploss\");\n\nconst OPTIONS_NAME = \"stoploss\";\n\n/**\n * æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰§è¡Œæ­¢æŸ\n * @param {*} stocks æŒä»“ä¿¡æ¯\n * @param {int} index äº¤æ˜“æ—¥ç´¢å¼•ä½ç½®\n * @param {*} stockData æ—¥çº¿æ•°æ®\n */\nfunction checkStoplossTransaction(stockInfo, stock, index, stockData, options) {\n    if (_.isEmpty(stock) || stock.count <= 0) return;\n\n    let currentData = stockData[index];\n    // æ­¢æŸæœ€å¤§æŸå¤±æ¯”ä¾‹\n    let S = options && options[OPTIONS_NAME].S;\n\n    // è¿™é‡Œæ£€æŸ¥çº¯ç²¹çš„ç™¾åˆ†æ¯”æ­¢æŸ\n    let tradeDate = currentData.trade_date;\n    let lossPrice = stock.price * (1 - S);\n    debug(\n        `æ­¢æŸæ£€æŸ¥${tradeDate}: ${currentData.low}] <= ${lossPrice.toFixed(\n            2\n        )} (=${stock.price.toFixed(2)}*(1-${(S * 100).toFixed(2)}%))`\n    );\n    if (currentData.low <= lossPrice) {\n        // å½“æ—¥ä»·æ ¼èŒƒå›´è¾¾åˆ°æ­¢æŸå€¼\n        return engine.createSellTransaction(\n            stockInfo,\n            tradeDate,\n            index,\n            stock.count,\n            lossPrice,\n            \"stoploss\",\n            `æ­¢æŸ ${lossPrice.toFixed(2)} (=${stock.price.toFixed(2)}*(1-${\n                S * 100\n            }%))`\n        );\n    }\n}\n\n/**\n * è¿”å›å‚æ•°é…ç½®çš„æ˜¾ç¤ºä¿¡æ¯\n * @param {*}} opions å‚æ•°é…ç½®\n */\nfunction showOptions(options) {\n    return `\næ¨¡å‹ ${stoploss.name}[${stoploss.label}] å‚æ•°ï¼š\næ­¢æŸæ¯”ä¾‹: ${options.stoploss.S * 100}%\n`;\n}\n\nlet stoploss = {\n    name: \"æ­¢æŸ\",\n    label: \"stoploss\",\n    description: \"æ­¢æŸ\",\n    methodTypes: {\n        stoploss: \"æ­¢æŸå–å‡º\",\n    },\n    checkSellTransaction: checkStoplossTransaction,\n    showOptions,\n};\n\nexport default stoploss;\n","import _ from \"lodash\";\nimport engine from \"./transaction-engine\";\n\nimport debugpkg from \"debug\";\nconst debug = debugpkg(\"benchmark\");\n\n/**\n * åŸºå‡†å‚æ•°ï¼Œç”¨äºæµ‹é‡æ­£å¸¸ä¹°å…¥å–å‡ºæƒ…å†µä¸‹çš„åŸºå‡†æ•ˆæœ\n * é‡‡ç”¨çš„ä¹°å…¥ç­–ç•¥ä¸ºå¼€ç›˜ä¹°å…¥ï¼Œç¬¬äºŒå¤©æ”¶ç›˜å–å‡ºï¼›æˆ–è€…æ­¢æŸå¹³ä»“\n */\nconst RULE_NAME = \"benchmark\";\n\n/**\n * æ£€æŸ¥ä¹°å…¥æ¡ä»¶\n * @param {*} stockInfo è‚¡ç¥¨ä¿¡æ¯\n * @param {double} balance è´¦æˆ·ä½™é¢\n * @param {int} index äº¤æ˜“æ—¥æ•°æ®ç´¢å¼•ä½ç½®\n * @param {*} stockData æ•°æ®\n * @param {*} options ç®—æ³•å‚æ•°\n */\nfunction checkBuyTransaction(stockInfo, balance, index, stockData, options) {\n    if (balance <= 0) return;\n    // debug(`ä¹°å…¥æ£€æŸ¥: ${balance}, ${tradeDate}, %o, ${index}`, stockData);\n\n    // let bmOptions = options && options[RULE_NAME];\n    let currentData = stockData[index];\n    // console.log(`è·Ÿè¸ªä¿¡æ¯ï¼š ${stockData.length}, ${index}`, currentData);\n    let targetPrice = currentData.open;\n    let tradeDate = stockData[index].trade_date;\n\n    return engine.createBuyTransaction(\n        stockInfo,\n        tradeDate,\n        index,\n        balance,\n        targetPrice,\n        RULE_NAME,\n        `åŸºå‡†ä¹°å…¥ ${targetPrice.toFixed(2)}`\n    );\n}\n\n/**\n * æ£€æŸ¥æ˜¯å¦å¯ä»¥ç”Ÿæˆå–å‡ºäº¤æ˜“ï¼Œå¦‚æœå¯ä»¥å–å‡ºï¼Œäº§ç”Ÿå–å‡ºäº¤æ˜“è®°å½•\n *\n * @param {*} info è‚¡ç¥¨ä¿¡æ¯\n * @param {*} stock æŒä»“ä¿¡æ¯\n * @param {*} index ä»Šæ—¥æ•°æ®ç´¢å¼•ä½ç½®\n * @param {*} stockData æ—¥çº¿æ•°æ®\n * @param {*} options ç®—æ³•å‚æ•°\n */\nfunction checkSellTransaction(stockInfo, stock, index, stockData, options) {\n    if (_.isEmpty(stock) || stock.count <= 0) return;\n\n    let currentData = stockData[index];\n    let tradeDate = currentData.trade_date;\n    let bmoptions = options && options[RULE_NAME];\n    let priceType = bmoptions.sellPrice;\n\n    if (priceType === \"open\") {\n        return engine.createSellTransaction(\n            stockInfo,\n            tradeDate,\n            index,\n            stock.count,\n            currentData.open,\n            priceType,\n            `å¼€ç›˜å–å‡º ${currentData.open})`\n        );\n    } else if (priceType === \"close\") {\n        return engine.createSellTransaction(\n            stockInfo,\n            tradeDate,\n            index,\n            stock.count,\n            currentData.open,\n            priceType,\n            `æ”¶ç›˜å–å‡º ${currentData.close}`\n        );\n    }\n}\n\n/**\n * è¿”å›å‚æ•°é…ç½®çš„æ˜¾ç¤ºä¿¡æ¯\n * @param {*}} opions å‚æ•°é…ç½®\n */\nfunction showOptions(options) {\n    return `\næ¨¡å‹ ${benchmark.name}[${benchmark.label}] å‚æ•°ï¼š\nå–å‡ºç±»å‹: ${options.benchmark.sellPrice}\n`;\n}\n\nlet benchmark = {\n    name: \"åŸºå‡†\",\n    label: RULE_NAME,\n    description: \"åŸºå‡†æµ‹è¯•\",\n    methodTyps: {\n        open: \"å¼€ç›˜å–å‡º\",\n        close: \"æ”¶ç›˜å–å‡º\",\n    },\n    checkBuyTransaction,\n    checkSellTransaction,\n    showOptions,\n};\n\nexport default benchmark;\n","// const simulate = require(\"./simulator\");\nimport simulate from \"./simulator\";\nimport mmb from \"./momentum-breakthrough\";\nimport stoploss from \"./stoploss\";\nimport benchmark from \"./benchmark-basic\";\nimport engine from \"./transaction-engine\";\nimport * as reports from \"./reports\";\nimport { formatFxstr } from \"./util\";\n\nconst rules = {\n    mmb,\n    stoploss,\n    benchmark,\n};\n\nexport { simulate, engine, rules, reports, formatFxstr };\n"],"names":["formatFxstr","num","toLocaleString","debug","debugpkg","executeTransaction","index","stockData","capitalData","options","translog","tradeDate","trade_date","stockInfo","info","sellRules","rules","sell","buyRules","buy","stocks","stockId","length","stock","sold","rule","name","checkSellTransaction","transeq","executeCapitalSettlement","price","count","total","toFixed","commission","fee","duty","memo","fixCash","cash","balance","initBalance","checkBuyTransaction","_transeq","_","isEmpty","type","ts_code","push","i","splice","settledlog","date","profit","income","transactions","createSellTransaction","tradeDateIndex","methodType","calculateTransactionFee","dateIndex","amount","createBuyTransaction","parseInt","exchange","parseCapitalReports","count_win","total_win","count_loss","total_loss","total_profit","total_fee","max_profit","max_loss","average_profit","average_win","average_loss","max_wintimes","max_losstimes","max_windays","max_lossdays","average_windays","average_lossdays","selltypes","ror_win","ror_loss","ror","tmp_cost","tmp_cost_win","tmp_cost_loss","currentType","tmp_times","tmp_windays","tmp_lossdays","log","days","selltype","times","win_times","loss_times","Number","showCapitalReports","stockvalue","capitalResult","showTransactions","logTransaction","holdlog","parseWorkdayReports","results","day","win_ratio","win","loss_ratio","loss","ratio_winloss","average","max_win","trans","moment","res","showWorkdayReports","reports","grid","CG","CGS","Style","columns","id","align","rows","report","workday","red","green","win_average","loss_average","profit_average","data","option","render","console","simulate","stockListData","readStockList","stockList","filterStockList","stockItem","readStockData","stockDataNames","daily","updateTime","format","filterStockData","calculatePrevAdjPrice","startDate","currentDate","isAfter","engine","showTrans","showWorkdays","dailyData","digits","forEach","item","prevadj_factor","open","close","high","low","pre_close","change","selectedStocks","map","tsCode","tmp","filter","reverse","OPTIONS_NAME","checkMMBBuyTransaction","mmboptions","N","P","mmbType","currentData","targetPrice","checkMMBSellTransaction","nommb1","nommb2","L","showOptions","mmb","label","description","methodTyps","mmb1","mmb2","checkStoplossTransaction","S","lossPrice","stoploss","methodTypes","RULE_NAME","bmoptions","priceType","sellPrice","benchmark"],"mappings":"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"}